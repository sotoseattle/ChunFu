var joker="",allowed="0\u25cb\u3007\uff2f\u96f61\uff11\u4e00\u58f9\u5e7a2\uff12\u4e8c\u5169\u8cb3\u4e24\u8d303\uff13\u4e09\u53c3\u53c1\u53c44\uff14\u56db\u80865\uff15\u4e94\u4f0d6\uff16\u516d\u9678\u96467\uff17\u4e03\u67d28\uff18\u516b\u634c9\uff19\u4e5d\u7396\u62fe\u5440\u5341\u4f70\u767e\u4edf\u5343\u5104\u4ebf\u842c\u4e07\u5eff\u5ff5\u5345\u534c\u7695\u9ede\u70b9.\u3001,\u8ca0\u8d1f-\u4eac\u5146\u4ebf\u4e07\u5343\u767e\u5341".split(""),formulaic={validate:function(a){for(var d=0,b=a.length;d<b;d++)if(-1==
$.inArray(a[d],allowed))return!1;return!0},call_server_with_number:function(a){$.ajax({url:"/numberutil",type:"get",data:{sourcestring:a},success:function(a){$("input#sourcestring").val("");$("#expo").html("");$("#expo2").html("");$("#expo3").html("");answer=$.parseJSON(a);$("#expo").append(answer.sol);$(".tt").tipTip({maxWidth:"auto",edgeOffset:5,defaultPosition:"top",delay:100})},error:function(){$("#expo").html("<div id='intro'>Something went horribly wrong. Please post bellow the Chinese number that you tried so we can search for the 'bug'.</div>")}})},
call_server_with_word:function(a){$.ajax({url:"/wordutil",type:"get",data:{term:a},success:function(d){$("input#term").val("");$("#expo").html("");$("#expo2").html("");$("#expo3").html("");answer=$.parseJSON(d);$("#expo").append(answer.sol);formulaic.call_server_deconstruct(a)},error:function(){$("#expo").html("<div id='intro'>Something went horribly wrong. Please post bellow the Chinese number that you tried so we can search for the 'bug'.</div>")}})},call_server_deconstruct:function(a){$.ajax({url:"/deconstruct",
type:"get",data:{term:a},success:function(d){answer=$.parseJSON(d);$("#expo2").append(answer.sol);formulaic.call_server_fuzzy(a)},error:function(){$("#expo2").html("<div id='intro'>Something went horribly wrong. Please post bellow the Chinese number that you tried so we can search for the 'bug'.</div>")}})},call_server_fuzzy:function(a){$.ajax({url:"/fuzzy_search",type:"get",data:{term:a},success:function(a){answer=$.parseJSON(a);$("#expo3").append(answer.sol)},error:function(){$("#expo3").html("<div id='intro'>Something went horribly wrong. Please post bellow the Chinese number that you tried so we can search for the 'bug'.</div>")}})},
turn_on_form:function(){$("input#mysubmit").click(function(){$("table#tabulary > tbody > tr").remove();chinumber=$("input#sourcestring").val();formulaic.validate(chinumber)?formulaic.call_server_with_number(chinumber):(console.log("WRONG INPUT"),$("#expo").html("<div id='intro'><p>I am sorry, the input string '"+chinumber+"' is not recognized. Only the following characters are valid:</p><p>"+allowed.toString()+"</p></div>"))});$("input#mysubmit2").click(function(){$("table#tabulary > tbody > tr").remove();
chiword=$("input#term").val();formulaic.call_server_with_word(chiword)})}};$(document).keypress(function(a){13==a.which&&1==$("#sourcestring:focus").length?$("input#mysubmit").click():13==a.which&&1==$("#term:focus").length&&$("input#mysubmit2").click()});$(function(){formulaic.turn_on_form()});(function(a){a.fn.tipTip=function(d){var b=a.extend({activation:"hover",keepAlive:!1,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:!1,enter:function(){},exit:function(){}},d);if(0>=a("#tiptip_holder").length){var f=a('<div id="tiptip_holder" style="max-width:'+b.maxWidth+';"></div>'),v=a('<div id="tiptip_content"></div>'),t=a('<div id="tiptip_arrow"></div>');a("body").append(f.html(v).prepend(t.html('<div id="tiptip_arrow_inner"></div>')))}else f=
a("#tiptip_holder"),v=a("#tiptip_content"),t=a("#tiptip_arrow");return this.each(function(){var d=a(this),x=b.content?b.content:d.attr(b.attribute);if(""!=x){b.content||d.removeAttr(b.attribute);var q=!1;"hover"==b.activation?(d.hover(function(){m()},function(){b.keepAlive||e()}),b.keepAlive&&f.hover(function(){},function(){e()})):"focus"==b.activation?d.focus(function(){m()}).blur(function(){e()}):"click"==b.activation&&(d.click(function(){m();return!1}).hover(function(){},function(){b.keepAlive||
e()}),b.keepAlive&&f.hover(function(){},function(){e()}));var m=function(){b.enter.call(this);v.html(x);f.hide().removeAttr("class").css("margin","0");t.removeAttr("style");var k=parseInt(d.offset().top),g=parseInt(d.offset().left),n=parseInt(d.outerWidth()),e=parseInt(d.outerHeight()),p=f.outerWidth(),l=f.outerHeight(),u=Math.round((n-p)/2),m=Math.round((e-l)/2),r=Math.round(g+u),h=Math.round(k+e+b.edgeOffset),c="",s="",w=Math.round(p-12)/2;"bottom"==b.defaultPosition?c="_bottom":"top"==b.defaultPosition?
c="_top":"left"==b.defaultPosition?c="_left":"right"==b.defaultPosition&&(c="_right");var y=u+g<parseInt(a(window).scrollLeft()),z=p+g>parseInt(a(window).width());if(y&&0>u||"_right"==c&&!z||"_left"==c&&g<p+b.edgeOffset+5)c="_right",s=Math.round(l-13)/2,w=-12,r=Math.round(g+n+b.edgeOffset),h=Math.round(k+m);else if(z&&0>u||"_left"==c&&!y)c="_left",s=Math.round(l-13)/2,w=Math.round(p),r=Math.round(g-(p+b.edgeOffset+5)),h=Math.round(k+m);g=k+e+b.edgeOffset+l+8>parseInt(a(window).height()+a(window).scrollTop());
n=0>k+e-(b.edgeOffset+l+8);if(g||"_bottom"==c&&g||"_top"==c&&!n)c="_top"==c||"_bottom"==c?"_top":c+"_top",s=l,h=Math.round(k-(l+5+b.edgeOffset));else if(n|("_top"==c&&n)||"_bottom"==c&&!g)c="_top"==c||"_bottom"==c?"_bottom":c+"_bottom",s=-12,h=Math.round(k+e+b.edgeOffset);if("_right_top"==c||"_left_top"==c)h+=5;else if("_right_bottom"==c||"_left_bottom"==c)h-=5;if("_left_top"==c||"_left_bottom"==c)r+=5;t.css({"margin-left":w+"px","margin-top":s+"px"});f.css({"margin-left":r+"px","margin-top":h+"px"}).attr("class",
"tip"+c);q&&clearTimeout(q);q=setTimeout(function(){f.stop(!0,!0).fadeIn(b.fadeIn)},b.delay)},e=function(){b.exit.call(this);q&&clearTimeout(q);f.fadeOut(b.fadeOut)}}})}})(jQuery);